<div class="box" *ngIf="showForm" [@FadeInOrOut]>
  <div class="load-bar" *ngIf="isLoading">
    <div class="bar"></div>
    <div class="bar"></div>
    <div class="bar"></div>
  </div>

  <h1 class="box__heading">COMPANY</h1>
  <p class="box__welcome-message">Welcome, please create your account.</p>
  <form class="form" #registerForm="ngForm" (ngSubmit)="register(registerForm)">
    <div class="row">
      <div class="input" [ngClass]="{ disabled: isLoading, error: firstName.invalid && registerForm.submitted }">
        <input [disabled]="isLoading" type="text" placeholder="First name" name="firstName" [(ngModel)]="user.firstName" #firstName="ngModel" required>
        <span class="input__hr"></span>
      </div>
      <div class="input" [ngClass]="{ disabled: isLoading, error: lastName.invalid && registerForm.submitted }">
        <input [disabled]="isLoading" type="text" placeholder="Last name" name="lastName" [(ngModel)]="user.lastName" #lastName="ngModel" required>
        <span class="input__hr"></span>
      </div>
    </div>
    <div class="input" [ngClass]="{ disabled: isLoading, error: errors['username'] || (username.invalid && registerForm.submitted) }">
      <input [disabled]="isLoading" type="text" placeholder="Username" name="username" [(ngModel)]="user.username" #username="ngModel" required>
      <span class="input__hr"></span>
    </div>
    <span class="error__message">{{errors['username']}}</span>

    <div class="input" [ngClass]="{ disabled: isLoading, error: errors['email'] || (email.invalid && registerForm.submitted) }">
      <input [disabled]="isLoading" type="text" placeholder="Email" name="email" [(ngModel)]="user.email" #email="ngModel" required email>
      <span class="input__hr"></span>
    </div>
    <span class="error__message">{{errors['email']}}</span>

    <div class="input" [ngClass]="{ disabled: isLoading, error: errors['password'] || (password.invalid && registerForm.submitted) }">
      <input [disabled]="isLoading" type="password" placeholder="Password" name="password" [(ngModel)]="user.password" #password="ngModel" required>
      <span class="input__hr"></span>
    </div>
    <span class="error__message">{{errors['password']}}</span>

    <div class="input" [ngClass]="{ disabled: isLoading, error: confirmPassword.invalid && registerForm.submitted }">
      <input [disabled]="isLoading" type="password" placeholder="Confirm password" name="confirmPassword" [(ngModel)]="user.confirmPassword" #confirmPassword="ngModel" required validateEqual="password">
      <span class="input__hr"></span>
    </div>

    <div class="checkbox"  [ngClass]="{ disabled: isLoading, error: agreeTerms.invalid && registerForm.submitted }">
      <input [disabled]="isLoading" id="accept-terms" type="checkbox" name="agreeTerms" [(ngModel)]="user.agreeTerms" #agreeTerms="ngModel" required>
      <label for="accept-terms">I agree with terms and conditions</label>
    </div>

    <button [disabled]="isLoading" class="btn btn--bigger btn--purple">Create</button>
  </form>
  <a [routerLink]="['/login']" class="link login">Already have an account? Sign in.</a>
  <div class="legal">
    <a class="link" href="">Terms of use</a>.
    <a class="link" href="">Privacy Policy</a>
  </div>
</div>
